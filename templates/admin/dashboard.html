{% extends "admin/admin_base.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="mb-4">
    <h2>Admin Dashboard</h2>
    <p class="text-muted">Welcome back, {{ current_user.username }}! Here's an overview of your store.</p>
</div>

<!-- Statistics Cards -->
<div class="row">
    <div class="col-md-3">
        <div class="stats-card">
            <div class="stats-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                <i class="fa fa-shopping-cart"></i>
            </div>
            <h3>{{ total_orders }}</h3>
            <p>Total Orders</p>
        </div>
    </div>
    <div class="col-md-3">
        <div class="stats-card">
            <div class="stats-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                <i class="fa fa-box"></i>
            </div>
            <h3>{{ total_products }}</h3>
            <p>Products</p>
        </div>
    </div>
    <div class="col-md-3">
        <div class="stats-card">
            <div class="stats-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                <i class="fa fa-users"></i>
            </div>
            <h3>{{ total_users }}</h3>
            <p>Users</p>
        </div>
    </div>
    <div class="col-md-3">
        <div class="stats-card">
            <div class="stats-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                <i class="fa fa-rupee-sign"></i>
            </div>
            <h3>₹{{ "%.2f"|format(total_revenue) }}</h3>
            <p>Total Revenue</p>
        </div>
    </div>
</div>

<!-- Recent Orders -->
<div class="content-card">
    <div class="content-card-header d-flex justify-content-between align-items-center">
        <h4><i class="fa fa-clock mr-2"></i> Recent Orders</h4>
        <a href="{{ url_for('admin_orders') }}" class="btn btn-sm btn-gradient">View All Orders</a>
    </div>
    
    {% if recent_orders %}
    <div class="table-responsive">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Order ID</th>
                    <th>Customer</th>
                    <th>Date</th>
                    <th>Total</th>
                    <th>Status</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for order in recent_orders %}
                <tr>
                    <td><strong>#{{ order.id }}</strong></td>
                    <td>{{ order.first_name }} {{ order.last_name }}</td>
                    <td>{{ order.created_at.strftime('%d %b %Y, %I:%M %p') }}</td>
                    <td><strong>₹{{ "%.2f"|format(order.total_amount) }}</strong></td>
                    <td>
                        {% if order.status == 'pending' %}
                            <span class="badge badge-warning badge-status">Pending</span>
                        {% elif order.status == 'processing' %}
                            <span class="badge badge-info badge-status">Processing</span>
                        {% elif order.status == 'completed' %}
                            <span class="badge badge-success badge-status">Completed</span>
                        {% elif order.status == 'cancelled' %}
                            <span class="badge badge-danger badge-status">Cancelled</span>
                        {% endif %}
                    </td>
                    <td>
                        <a href="{{ url_for('admin_order_details', order_id=order.id) }}" class="btn btn-sm btn-primary">
                            <i class="fa fa-eye"></i> View
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="alert alert-info">
        <i class="fa fa-info-circle mr-2"></i> No orders yet.
    </div>
    {% endif %}
</div>

<!-- Quick Actions -->
<div class="row mt-4">
    <div class="col-md-12">
        <div class="content-card">
            <div class="content-card-header">
                <h4><i class="fa fa-bolt mr-2"></i> Quick Actions</h4>
            </div>
            <div class="row">
                <div class="col-md-3">
                    <a href="{{ url_for('admin_add_product') }}" class="btn btn-gradient btn-block btn-lg">
                        <i class="fa fa-plus mr-2"></i> Add Product
                    </a>
                </div>
                <div class="col-md-3">
                    <a href="{{ url_for('admin_add_category') }}" class="btn btn-gradient btn-block btn-lg">
                        <i class="fa fa-plus mr-2"></i> Add Category
                    </a>
                </div>
                <div class="col-md-3">
                    <a href="{{ url_for('admin_orders') }}" class="btn btn-gradient btn-block btn-lg">
                        <i class="fa fa-list mr-2"></i> View All Orders
                    </a>
                </div>
                <div class="col-md-3">
                    <a href="{{ url_for('admin_products') }}" class="btn btn-gradient btn-block btn-lg">
                        <i class="fa fa-box mr-2"></i> Manage Products
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
