{% extends "admin/admin_base.html" %}

{% block title %}Change Password{% endblock %}

{% block content %}
<div class="mb-4">
    <h2>Change Password</h2>
    <p class="text-muted">Update your admin account password</p>
</div>

<div class="content-card" style="max-width: 600px;">
    <div class="alert alert-info">
        <i class="fa fa-info-circle mr-2"></i> 
        <strong>Password Requirements:</strong>
        <ul class="mb-0 mt-2">
            <li>Minimum 6 characters</li>
            <li>Use a strong, unique password</li>
            <li>Don't use common words or easily guessable information</li>
        </ul>
    </div>

    <form method="POST" action="{{ url_for('admin_change_password') }}">
        <div class="form-group">
            <label for="current_password"><strong>Current Password *</strong></label>
            <input type="password" class="form-control" id="current_password" name="current_password" required placeholder="Enter your current password">
        </div>

        <div class="form-group">
            <label for="new_password"><strong>New Password *</strong></label>
            <input type="password" class="form-control" id="new_password" name="new_password" required minlength="6" placeholder="Enter new password (min 6 characters)">
        </div>

        <div class="form-group">
            <label for="confirm_password"><strong>Confirm New Password *</strong></label>
            <input type="password" class="form-control" id="confirm_password" name="confirm_password" required minlength="6" placeholder="Re-enter new password">
        </div>

        <hr class="my-4">

        <div class="form-group">
            <button type="submit" class="btn btn-gradient btn-lg">
                <i class="fa fa-lock mr-2"></i> Change Password
            </button>
            <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary btn-lg">
                <i class="fa fa-times mr-2"></i> Cancel
            </a>
        </div>
    </form>
</div>

{% block extra_js %}
<script>
    // Client-side password match validation
    document.querySelector('form').addEventListener('submit', function(e) {
        var newPassword = document.getElementById('new_password').value;
        var confirmPassword = document.getElementById('confirm_password').value;
        
        if (newPassword !== confirmPassword) {
            e.preventDefault();
            alert('New passwords do not match!');
            return false;
        }
        
        if (newPassword.length < 6) {
            e.preventDefault();
            alert('Password must be at least 6 characters long!');
            return false;
        }
    });
</script>
{% endblock %}
{% endblock %}
