{% include "header.html" %}

    <!-- ##### Breadcrumb Area Start ##### -->
    <div class="breadcrumb-area">
        <!-- Top Breadcrumb Area -->
        <div class="top-breadcrumb-area bg-img bg-overlay d-flex align-items-center justify-content-center" style="background-image: url('{{ url_for('static', filename='img/bg-img/24.jpg') }}');">
            <h2>Checkout</h2>
        </div>

        <div class="container">
            <div class="row">
                <div class="col-12">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="{{ url_for('home') }}"><i class="fa fa-home"></i> Home</a></li>
                            <li class="breadcrumb-item"><a href="{{ url_for('cart') }}">Cart</a></li>
                            <li class="breadcrumb-item active" aria-current="page">Checkout</li>
                        </ol>
                    </nav>
                </div>
            </div>
        </div>
    </div>
    <!-- ##### Breadcrumb Area End ##### -->

    <!-- ##### Checkout Area Start ##### -->
    <div class="checkout_area mb-100">
        <div class="container">
            <div class="row justify-content-between">
                <div class="col-12 col-lg-7">
                    <div class="checkout_details_area clearfix">
                        <h5>Billing Details</h5>
                        <form action="{{ url_for('checkout') }}" method="post" id="checkoutForm">
                            <div class="row">
                                <div class="col-md-6 mb-4">
                                    <label for="first_name">First Name *</label>
                                    <input type="text" class="form-control" id="first_name" name="first_name" value="{{ user.username.split()[0] if user else '' }}" required>
                                </div>
                                <div class="col-md-6 mb-4">
                                    <label for="last_name">Last Name *</label>
                                    <input type="text" class="form-control" id="last_name" name="last_name" value="{{ user.username.split()[1] if user and user.username.split()|length > 1 else '' }}" required>
                                </div>
                                <div class="col-12 mb-4">
                                    <label for="email">Email Address *</label>
                                    <input type="email" class="form-control" id="email" name="email" value="{{ user.email if user else '' }}" required>
                                </div>
                                <div class="col-md-6 mb-4">
                                    <label for="phone">Phone Number (Mobile) *</label>
                                    <input type="text" class="form-control" id="phone" name="phone" value="" required maxlength="10" pattern="[0-9]{10}" title="Please enter exactly 10 digits" oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 10)">
                                    <small class="form-text text-muted">Enter 10 digit mobile number</small>
                                </div>
                                <div class="col-md-6 mb-4">
                                    <label for="telephone">Telephone (Optional)</label>
                                    <input type="tel" class="form-control" id="telephone" name="telephone" value="">
                                </div>
                                <div class="col-12 mb-4">
                                    <label for="company">Company Name</label>
                                    <input type="text" class="form-control" id="company" name="company" value="">
                                </div>
                                <div class="col-12 mb-4">
                                    <label for="address">Address *</label>
                                    <input type="text" class="form-control" id="address" name="address" value="" required>
                                </div>
                                <div class="col-md-6 mb-4">
                                    <label for="city">Town/City *</label>
                                    <input type="text" class="form-control" id="city" name="city" value="" required>
                                </div>
                                <div class="col-md-6 mb-4">
                                    <label for="state">State/Province *</label>
                                    <input type="text" class="form-control" id="state" name="state" value="" required>
                                </div>
                                <div class="col-md-6 mb-4">
                                    <label for="country">Country *</label>
                                    <select class="custom-select d-block w-100" id="country" name="country" required>
                                        <option value="india" selected>India</option>
                                        <option value="usa">United States</option>
                                        <option value="uk">United Kingdom</option>
                                        <option value="ger">Germany</option>
                                        <option value="fra">France</option>
                                        <option value="aus">Australia</option>
                                        <option value="bra">Brazil</option>
                                        <option value="cana">Canada</option>
                                    </select>
                                </div>
                                <div class="col-md-6 mb-4">
                                    <label for="postcode">Postcode/Zip</label>
                                    <input type="text" class="form-control" id="postcode" name="postcode" value="">
                                </div>
                                <div class="col-md-12 mb-4">
                                    <label for="order_notes">Order Notes</label>
                                    <textarea class="form-control" id="order_notes" name="order_notes" cols="30" rows="10" placeholder="Notes about your order, e.g. special notes for delivery."></textarea>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="col-12 col-lg-4">
                    <div class="checkout-content">
                        <h5 class="title--">Your Order</h5>
                        <div class="products">
                            <div class="products-data">
                                <h5>Products:</h5>
                                {% for item in cart_items %}
                                <div class="single-products d-flex justify-content-between align-items-center">
                                    <p>{{ item.product.name }} × {{ item.quantity }} kg</p>
                                    <h5>₹{{ "%.2f"|format(item.subtotal) }}</h5>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                        <div class="subtotal d-flex justify-content-between align-items-center">
                            <h5>Subtotal</h5>
                            <h5>₹{{ "%.2f"|format(total) }}</h5>
                        </div>
                        <div class="order-total d-flex justify-content-between align-items-center">
                            <h5>Order Total</h5>
                            <h5>₹{{ "%.2f"|format(total) }}</h5>
                        </div>
                        <div class="checkout-btn mt-30">
                            <button type="submit" form="checkoutForm" class="btn alazea-btn w-100">Place Order</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- ##### Checkout Area End ##### -->

{% include "footer.html" %}
